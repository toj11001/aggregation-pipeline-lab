"use strict";(self.webpackChunkaggregation_pipeline_workshop=self.webpackChunkaggregation_pipeline_workshop||[]).push([[7238],{9023:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>g,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var o=t(4848),s=t(8453);const r={},i="\ud83d\udc50 $count",a={id:"counting-sorting/counting-documents",title:"\ud83d\udc50 $count",description:"\u6211\u4eec\u5982\u4f55\u786e\u5b9a\u6b64\u7ba1\u9053\u8fd4\u56de\u7684\u6b63\u597d\u662f15\u672c\u4e66\uff1f",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/50-counting-sorting/1-counting-documents.mdx",sourceDirName:"50-counting-sorting",slug:"/counting-sorting/counting-documents",permalink:"/aggregation-pipeline-lab/zh/docs/counting-sorting/counting-documents",draft:!1,unlisted:!1,editUrl:"https://github.com/toj11001/aggregation-pipeline-lab/blob/main/docs/50-counting-sorting/1-counting-documents.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Counting and Sorting",permalink:"/aggregation-pipeline-lab/zh/docs/category/counting-and-sorting"},next:{title:"\ud83d\udc50 \u6392\u5e8f",permalink:"/aggregation-pipeline-lab/zh/docs/counting-sorting/sorting"}},c={},l=[{value:"\u9636\u6bb5\u7684\u987a\u5e8f\u5f88\u91cd\u8981",id:"\u9636\u6bb5\u7684\u987a\u5e8f\u5f88\u91cd\u8981",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"-count",children:"\ud83d\udc50 $count"})}),"\n",(0,o.jsx)(n.p,{children:"\u6211\u4eec\u5982\u4f55\u786e\u5b9a\u6b64\u7ba1\u9053\u8fd4\u56de\u7684\u6b63\u597d\u662f15\u672c\u4e66\uff1f"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"let moreThan150pages =  {pages: {$gte: 150}}\nlet booksFrom1985WithMoreThan150pages = {$match: {$and: [{year: 1985}, moreThan150pages]}};\nlet showOnlyTheseFields = {$project: {_id: 0, title: 1, year: 1, totalInventory: 1, available: 1}};\nlet getJust15books =  {$limit: 15};\n\ndb.books.aggregate([\n    booksFrom1985WithMoreThan150pages,\n    showOnlyTheseFields,\n    getJust15books,\n]);\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u8ba1\u6570\u4e66\u7c4d\uff01\u8ba9\u6211\u4eec\u5411\u7ba1\u9053\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u65b0\u9636\u6bb5\u6765\u8ba1\u6570\u8fd9\u4e9b\u4e66\u7c4d\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'let moreThan150pages =  {pages: {$gte: 150}}\nlet booksFrom1985WithMoreThan150pages = {$match: {$and: [{year: 1985}, moreThan150pages]}};\nlet showOnlyTheseFields = {$project: {_id: 0, title: 1, year: 1, totalInventory: 1, available: 1}};\nlet getJust15books =  {$limit: 15};\nlet count = {$count: "totalBooks"}\n\ndb.books.aggregate([\n    booksFrom1985WithMoreThan150pages,\n    showOnlyTheseFields,\n    getJust15books,\n    count,\n]);\n'})}),"\n",(0,o.jsxs)(n.p,{children:["\u5728\u8fd9\u91cc\uff0c",(0,o.jsx)(n.code,{children:"$count"}),"\u5c06\u8ba1\u6570\u7ed3\u679c\u6587\u6863\u5e76\u8fd4\u56de\u4e00\u4e2a\u53ea\u6709\u4e00\u4e2a\u5b57\u6bb5\u7684\u6587\u6863\uff1a",(0,o.jsx)(n.code,{children:"totalBooks"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"{\n  totalBooks: 15\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\ud83d\udc50 \u6211\u4eec\u7684",(0,o.jsx)(n.code,{children:"authors"}),"\u96c6\u5408\u4e2d\u6709\u591a\u5c11\u4f5c\u8005\uff1f"]}),"\n",(0,o.jsxs)(t,{children:[(0,o.jsx)("summary",{children:"\u7b54\u6848"}),(0,o.jsx)("div",{children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'db.authors.aggregate([{$count: "authorCount"}])\n'})})})]}),"\n",(0,o.jsx)(n.h2,{id:"\u9636\u6bb5\u7684\u987a\u5e8f\u5f88\u91cd\u8981",children:"\u9636\u6bb5\u7684\u987a\u5e8f\u5f88\u91cd\u8981"}),"\n",(0,o.jsxs)(n.p,{children:["\u5982\u679c\u6211\u4eec\u5728",(0,o.jsx)(n.code,{children:"$match"}),"\u9636\u6bb5\u4e4b\u540e\u8fdb\u884c\u8ba1\u6570\uff0c\u6211\u4eec\u4f20\u9012\u7ed9\u4e0b\u4e00\u6b65\u9aa4\u7684\u6587\u6863\u53ea\u5305\u542b",(0,o.jsx)(n.code,{children:"totalBooks"}),"\u5b57\u6bb5\u3002\u56e0\u6b64\uff0c",(0,o.jsx)(n.code,{children:"$project"}),"\u9636\u6bb5\u5c06\u8fd4\u56de\u4e00\u4e2a\u7a7a\u6587\u6863\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'let moreThan150pages =  {pages: {$gte: 150}}\nlet booksFrom1985WithMoreThan150pages = {$match: {$and: [{year: 1985}, moreThan150pages]}};\nlet showOnlyTheseFields = {$project: {_id: 0, title: 1, year: 1, totalInventory: 1, available: 1}};\nlet getJust15books =  {$limit: 15};\nlet count = {$count: "totalBooks"}\n\ndb.books.aggregate([\n    booksFrom1985WithMoreThan150pages,\n    count,\n    showOnlyTheseFields,\n    getJust15books,\n]);\n'})})]})}function g(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var o=t(6540);const s={},r=o.createContext(s);function i(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);